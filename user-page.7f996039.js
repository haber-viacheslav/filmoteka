var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired76b;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired76b=o),o("1WryC"),o("70ns7");var r=o("eyjy7"),s=o("jhtdw"),i=o("d1BSM");s.app;document.querySelector(".menu__logout").addEventListener("click",(function(e){e.preventDefault();const t=(0,r.getAuth)();(0,r.signOut)(t).then((()=>{(0,i.notifyInfoMessage)("You loged out!"),location="http://localhost:1234/index.html"})).catch((e=>{console.error(e)}))})),o("ffjl9");r=o("eyjy7");var l=o("jAzyG"),a=(s=o("jhtdw"),o("dkKs9")),u=o("359X7"),c=o("7RIyI"),d=o("awOEx");i=o("d1BSM");const f=new(0,d.default),h=new(0,c.default),g=(0,l.getDatabase)(s.app),p=(0,r.getAuth)(s.app);function y(e){(0,r.onAuthStateChanged)(p,(e=>{if(e){const t=e.uid;(0,l.get)((0,l.child)((0,l.ref)(g),`users/${t}/userQueue`)).then((e=>{if(e.exists()){const t=e.val(),n=Object.keys(t);console.log(n);const o=[];for(const e of n)o.push(e);return console.log(o),o}})).then((e=>{if(!e)return(0,i.notifyInfoMessage)("You do not have any movies in Queue!"),void(document.querySelector(".films__list--user").innerHTML="");const t=[];for(const n of e){const e=f.getCurrentFilm({id:n});t.push(e)}Promise.all(t).then((e=>{h.renderMarkup({selector:".films__list--user",innerHtml:!0,createMarkypFunc:h.createFilmUserCardsMarkup(e,u.genres)})}))})).catch((e=>console.error(e)))}else(0,i.notifyFailureMessage)("Please Log In!")}))}y(),a.refs.btnQueue.addEventListener("click",y),a.refs.btnWatched.addEventListener("click",(function(e){(0,r.onAuthStateChanged)(p,(e=>{if(e){const t=e.uid;(0,l.get)((0,l.child)((0,l.ref)(g),`users/${t}/userWatched`)).then((e=>{if(e.exists()){const t=e.val();console.log(t);const n=Object.keys(t),o=[];for(const e of n)o.push(e);return o}})).then((e=>{if(!e)return(0,i.notifyInfoMessage)("You do not have any movies in Watched!"),void(document.querySelector(".films__list--user").innerHTML="");const t=[];for(const n of e){const e=f.getCurrentFilm({id:n});t.push(e)}Promise.all(t).then((e=>{h.renderMarkup({selector:".films__list--user",innerHtml:!0,createMarkypFunc:h.createFilmUserCardsMarkup(e,u.genres)})}))})).catch((e=>console.error(e)))}else(0,i.notifyFailureMessage)("Please Log In!")}))})),o("e7qNI");a=o("dkKs9");var m=o("dLzFW"),v=o("7hQEe");a.refs.filmListUser.addEventListener("click",m.onShowFilmModal);new(0,v.default)({options:{backgroundColor:"#000000",svgColor:"#FF6B08"}}).enabled({timeDelay:10,delayAfterStop:350});
//# sourceMappingURL=user-page.7f996039.js.map
