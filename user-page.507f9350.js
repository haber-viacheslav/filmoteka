!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequired76b;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequired76b=n),n("aar0g"),n("eZZGH");var o=n("gQOBw"),i=n("iFsN9"),a=n("dtYBq");i.app,document.querySelector(".menu__logout").addEventListener("click",(function(e){e.preventDefault();var t=(0,o.getAuth)();(0,o.signOut)(t).then((function(){(0,a.notifyInfoMessage)("You loged out!"),location="https://haber-viacheslav.github.io/filmoteka/index.html"})).catch((function(e){console.error(e)}))})),n("2xDiJ");o=n("gQOBw");var l=n("cokon"),u=(i=n("iFsN9"),n("jxf8A")),s=n("c0QYQ"),c=n("408gj"),f=n("iibY6"),d=(a=n("dtYBq"),new(0,f.default)),v=new(0,c.default),h=(0,l.getDatabase)(i.app),y=(0,o.getAuth)(i.app);function g(e){(0,o.onAuthStateChanged)(y,(function(e){if(e){var t=e.uid;(0,l.get)((0,l.child)((0,l.ref)(h),"users/".concat(t,"/userQueue"))).then((function(e){if(e.exists()){var t=e.val(),r=Object.keys(t),n=[],o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;n.push(s)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return n}})).then((function(e){if(!e)return(0,a.notifyInfoMessage)("You do not have any movies in Queue!"),document.querySelector(".films__list--user").innerHTML="",void document.querySelector(".stub__container").classList.remove("is-hidden");var t=[],r=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=d.getCurrentFilm({id:u});t.push(c)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}Promise.all(t).then((function(e){v.renderMarkup({selector:".films__list--user",innerHtml:!0,createMarkypFunc:v.createFilmUserCardsMarkup(e,s.genres)})}))})).catch((function(e){return console.error(e)}))}else(0,a.notifyFailureMessage)("Please Log In!")}))}g(),u.refs.btnQueue.addEventListener("click",g),u.refs.btnWatched.addEventListener("click",(function(e){(0,o.onAuthStateChanged)(y,(function(e){if(e){var t=e.uid;(0,l.get)((0,l.child)((0,l.ref)(h),"users/".concat(t,"/userWatched"))).then((function(e){if(e.exists()){var t=e.val(),r=Object.keys(t),n=[],o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;n.push(s)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return n}})).then((function(e){if(!e)return(0,a.notifyInfoMessage)("You do not have any movies in Watched!"),document.querySelector(".films__list--user").innerHTML="",void document.querySelector(".stub__container").classList.remove("is-hidden");document.querySelector(".stub__container").classList.add("is-hidden");var t=[],r=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=d.getCurrentFilm({id:u});t.push(c)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}Promise.all(t).then((function(e){v.renderMarkup({selector:".films__list--user",innerHtml:!0,createMarkypFunc:v.createFilmUserCardsMarkup(e,s.genres)})}))})).catch((function(e){return console.error(e)}))}else(0,a.notifyFailureMessage)("Please Log In!")}))})),n("aZ2bT");u=n("jxf8A");var m=n("lo7pY"),p=n("g649J");u.refs.filmListUser.addEventListener("click",m.onShowFilmModal),new(0,p.default)({options:{backgroundColor:"#000000",svgColor:"#FF6B08"}}).enabled({timeDelay:5,delayAfterStop:350})}();
//# sourceMappingURL=user-page.507f9350.js.map
